# Tanstack Query

**Tanstack Query를 사용하는 이유를 설명해주세요**

### Tanstack Query란?

- React 또는 다른 프레임워크에서 비동기 데이터를 효율적으로 다루기 위한 라이브러리
- API 데이터를 서버에서 가져와 화면에 보여주는 작업을 간편하고 안정적으로 처리할 수 있도록 도움
- 서버 상태 관리를 위한 도구

### Tanstack Query를 사용하는 이유

1. 자동 캐싱 & 데이터 공유
   - 같은 데이터를 여러 컴포넌트에서 요청해도 한 번만 요청하고 공유
   - 불필요한 네트워크 요청이 줄어듬
2. 자동 리페치 & 갱신
   - 탭 전환, focus 시 자동 refetch
   - stale time, cache time 등을 세밀하게 제어 가능
3. 로딩/에러/성공 상태 자동 관리
   - 별도 상태 선언 없이 로딩 여부, 에러 여부 등을 바로 사용할 수 있음
   ```javascript
   const { data, isLoading, isError } = useQuery(["users"], fetchUsers);
   ```
4. SSR/CSR, Suspense, Pagination등 지원
   - Next.js등과 잘 맞고 SSR도 대응
   - Infinite scroll, 페이지네이션도 쉽게 구현 가능
5. Mutation 기능
   - POST/PUT/DELETE 같은 변경 요청도 관리
   - 낙관적 업데이트, 오류 롤백 등도 쉽게 구현

---

### 서버 상태 vs 클라이언트 상태

- 서버 상태

  - 서버로부터 비동기로 가져온 외부 데이터
  - 클라이언트는 이 데이터를 직접 수정할 수 없고 서버에 요청을 보내야 변경됨
  - 데이터를 가져오는 동안 로딩 상태, 실패 시 에러 처리, 갱신 등이 필요
  - 효율을 위해 캐싱 필수
  - 여러 컴포넌트에 공유될 수 있음
  - 보통 `Tanstack Query`, `SWR`등으로 관리
  - 예시 : 유저 목록, 게시글, API 응답 데이터

- 클라이언트 상태 :
  - 사용자 인터페이스(UI)와 관련된 로컬 상태
  - 애플리케이션 내부에서 생성, 수정, 보관되는 상태
  - 서버와 통신 없이도 즉시 조작 가능
  - 캐싱이 보통 필요 없음
  - 컴포넌트 내부 또는 전역 상태로 공유
  - 보통 `useState`, `useReducer`, `useContext` 또는 `Redux`,`Zustand`등으로 관리
  - 예시 : 모달 열림 여부, 폼 입력값, 탭 선택 상태

### 서버 상태로 하는 것

- 로딩 상태 관리
- 에러 처리
- 데이터 캐싱
- 리페치 타이밍(refetching)
- 상태 간 공유
- 낙관적 업데이트 등등...
