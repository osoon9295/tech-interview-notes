# LocalStorage & SesstionStorage

**localStorage와 sessionStorage의 차이점에 대해서 설명해주세요**

### 로컬스토리지 LocalStorage

- 브라우저에 데이터를 저장하는 웹 스토리지 방식
- 클라이언트 측에서 데이터를 간단하게 보관 할 수 있도록 도움
- 무제한 저장 : 사용자가 직접 삭제하거나 코드로 삭제하기 전까지 계속 유지
- 페이지/탭 간 공유 : 동일한 도메인 내에서는 모든 탭/창에서 공유
- 예시 : 로그인 상태 유지, 다크 모드 설정 저장, 장바구니 데이터 등 장기 보존용

### 세션스토리지 SessionStorage

- 브라우저에 데이터를 저장하는 웹 스토리지 방식
- 클라이언트 측에서 데이터를 간단하게 보관 할 수 있도록 도움
- 기간 제한 저장 : 브라우저 탭을 닫을 때까지만 유지
- 동일 탭 공유 : 동일한 탭 내에서만 공유, 새 탭에서는 공유되지 않음
- 예시 : 일시적인 입력값 저장, 탭 별로 독립된 상태 관리

### 공통점

- 브라우저에서 문자열 기반 데이터를 저장 (key-value쌍)
- 크기는 대체로 약 5MB 내외 (브라우저마다 조금 다름)
- JSON.stringify/JSON.parse를 통해 객체 저장 가능
- 쿠키보다 간단하고 저장 용량이 큼
- 서버로 자동 전송되지 않음 (때로 이 점이 보안에 유리)

### 차이점

- 지속성
  - 로컬 : 브라우저 종료 후에도 유지
  - 세션 : 탭 종료 시 삭제
- 범위
  - 로컬 : 같은 도메인의 모든 탬에서 공유
  - 세션 : 현재 탭에서만 사용 가능
- 주 용도
  - 로컬 : 설정/로그인 상태 등 장기 저장
  - 세션 : 일시적인 폼 입력 등 단기 저장

---

### 웹 스토리지의 단점

1. 보안 취약점

   - 브라우저에 저장된 데이터는 쉽게 접근 가능
   - JavaScript로 접근 가능 : XSS(Cross-Site Scripting) 공격에 노출될 경우 조심
   - 예시 : 토큰을 로컬스토리지에 저장하면 악성 스크립트가 탈취할 수 있음

   => 중요 정보(액세스 토큰, 비밀번호 등)는 저장하지 않는 것이 원칙

2. 저장 용량 제한

   - 대부분 5MB 내외
   - 이미지, 대용량 JSON 데이터 등을 저장하기에는 부적합

3. 도메인/브라우저에 종속적

   - 저장된 데이터는 같은 도메인과 같은 브라우저에서만 접근 가능
   - 예시 : `example.con`에서 저장한 로컬스토리지는 `sub.example.com`또는 `localhost`에서는 접근 불가
   - 사용자가 브라우저를 바꾸면 데이터가 공유되지 않음

4. 자동 동기화 불가

   - 탭 간 동기화가 자동으로 되지 않음

5. 비동기 처리 불가
   - 동기 API이기 때문에 I/O 작업이 메인 스레드를 차단할 수 있음
   - 대량의 데이터를 읽거나 쓰면 브라우저 렌더링에 영향을 줄 수 있음

### 웹 스토리지의 대안

- Cookies : 서버와 자동 전송되므로 인증정보 저장 시 유리 (하지만 크기 작음, 보안 설정 필요)
- IndexedDB : 구조화된 데이터, 비동기 처리, 대용량 저장 가능
- Secure HTTP-only cookies : 보안 인증 토큰 저장에 적합

### Cookie

- 브라우저가 서버와 통신할 때 자동으로 포함해 전송되는 작은 데이터
- 주로 사용자 인증, 세션 유지, 트래킹 등에 사용
- 서버/클라이언트 둘 다 접근 가능
- 도메인당 약 4KB로 작음
- 보안 옵션 제공 : `Secure`,`HttpOnly`,`SameSite`등 다양한 보안 설정 가능

### Cookie 사용 시 주의할 점

- 용량 제한 (4KB): 대용량 데이터는 부적합 -> 로컬스토리지 또는 다른 것 사용
- CSRF 공격 가능성 : 자동으로 전송되기 때문에, 인증용 쿠키는 반드시 `SameSite=Lax`또는 `Strict`, 또는 CSRF 토큰을 병행 사용해야 함
- 민감 정보 저장 금지 : 평문 저장 시 노출 위험 있음 -> 민감한 데이터는 저장하지 말고 토큰 기반 처리
